# WarChessor

## 一、游戏玩法设计细化

### 1. 核心机制优化

#### 兵力增长规则  
- **基本土地**：需至少1名士兵驻守，每5回合自动+1兵（可叠加政治中心效果）。若被敌军占领，驻军归零后需重新积累。  
- **大本营**：每回合固定+1兵，初始驻军设定为 0。若被攻陷，玩家立即失败。  
- **人口重镇**：占领后与大本营同频增长（每回合+1兵），建议地图中每50格设置1个，总数量不超过地图面积的5%。
- **政治中心**：  
  - 全局可见，本方缩短所有土地兵力增长周期（如占领1个则基本土地变为4回合+1兵，最多叠加至1回合+1兵）。  

#### 兵力运动规则
- 兵力运动速度恒定，每格一个回合。

### 2. 地图动态设计

#### 地形复杂度  
- **基础结构**：采用蜂窝状六边形网格（优于方形网格，增强策略性），地图尺寸支持10×10至 30×30动态生成。  
- **关键城镇分布**：  
  - 人口重镇优先布局在交通枢纽（如河流交叉口、山脉隘口）
  - 政治中心分散在地图四角或中心区域，需通过路径争夺。

### 3. 战斗与视野系统
- **占领判定**：军队数值高的方自动占领土地，若数值相等则双方兵力归零，土地被原来占领者拥有。  
- **视野机制**：  
  - 玩家仅可见已占领土地及外围1格（迷雾效果采用灰度渐变）
  - 政治中心以高亮图标全局显示。  

### 4. AI设计（本地关卡）
- **难度分级**：  
  - **简单AI**：优先防守大本营，兵力分散。
  - **困难AI**：主动抢占政治中心，采用"钳形攻势"包围玩家。
- **行为树逻辑**：根据玩家兵力密度动态调整策略，如低密度区域偷袭、高密度区域迂回。

## 二、UI/UX设计细化

### 1. 界面层级与交互

#### 主页面  
- **视觉风格**：极简线条风，背景纯色渐变。  
- **标题**：游戏名称"WarChessor"，图标为城堡(castle)，使用SVG生成。
- **按钮设计**：  
  - **本地模式**：图标为城堡，点击后弹出关卡选择浮层（显示关卡难度、地图尺寸、通关率）。  
  - **在线模式**：图标为卫星，点击后弹出Toast提示"指挥官，远征系统正在建设中！"并播放电流音效。

#### 战斗界面
- **状态面板**：右侧悬浮面板显示兵力统计、政治中心占领进度。 
- **地图渲染**：以用户颜色展示占领土地
- **缩放功能**：地图可缩放，放大时显示具体兵力，缩小时仅展示颜色
- **控制按钮**：左下侧放置行军按钮

#### 交互方式
- 用户通过点击行军按钮来开始行军
- 点击行军按钮后，用户可依次单击土地设置中转点（最多10个）
- 行军按钮点击后变为中止路径按钮，允许提前结束路径设置

### 2. 动态反馈与沉浸感
- **战斗特效**：政治中心被占领时播放全屏金色波纹动画。  
- **音效设计**：背景音乐根据战况动态切换（平静→紧张），关键事件配语音提示。

## 游戏界面

### 主界面
- **背景**：战棋主题背景图片
- **标题**：战棋大师（字体大小60px，白色）
- **按钮**：
  - 本地对战按钮：点击后进入关卡选择页面
  - 联机对战按钮：点击后显示"远征系统正在开发中"提示
  
游戏的第一个场景是主界面，玩家可以从这里进入本地对战模式或联机对战模式。主界面使用`Main.ts`脚本控制，目前已实现界面的基本布局，包括背景、标题和两个功能按钮。点击本地对战按钮会跳转到关卡选择页面，点击联机对战按钮会显示提示信息。

### 关卡选择页面
- **背景**：与主界面相同的背景图片
- **标题**：关卡选择（字体大小48px，白色）
- **滚动视图**：展示所有可选关卡
- **关卡项目**：
  - 关卡名称
  - 关卡描述
  - 难度等级（以星级表示）
  - 关卡预览图
  - 开始按钮
  - 锁定状态图标（未解锁的关卡）
- **返回按钮**：返回主界面

关卡选择页面允许玩家选择要挑战的关卡。未解锁的关卡显示为灰色，并带有锁定图标。关卡数据存储在`assets/resources/levels/levelData.json`文件中，可以方便地添加、修改或删除关卡。点击已解锁关卡的开始按钮将加载相应的游戏场景。
